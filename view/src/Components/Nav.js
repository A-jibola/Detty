import React, { useEffect, useState } from 'react'
import axios from 'axios'

export default function Nav() {

    const [isLoggedIn, SetIsLoggedIn] = useState(false)
    const [navStyle, SetNavStyle] = useState('navbar-collapse nav-all-right m-0 px-2')

    useEffect(()=>{
        if(window.location.pathname !== '/'){ SetNavStyle('navbar-collapse nav-all-right m-0 px-2 border-bottom-light') }
        const checkLoginStatus = async ()=>{
            const token = localStorage.getItem('tokenStore');
            if(token){
                const response  = await axios.get('/user/', {
                    headers:{Authorization:token}
                });
                if(response.data.loggedIn){
                    SetIsLoggedIn(true);
                }
                else{
                    SetIsLoggedIn(false);  
                }
            }
            else{
                SetIsLoggedIn(false);
            }
        }
        checkLoginStatus();
    }, [isLoggedIn])

  return (
    <>
        {isLoggedIn?
            <div className={navStyle}>
                <div className="navbar-head nav-left">
                    <div className="navbar-toogle-button" data-collapse="collapseSidebar"></div>
                    <a href='/' className="navbar-header">
                    <svg width="91" height="32" viewBox="0 0 91 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M6.4375 0.3125H15.9375C17.3646 0.3125 18.6771 0.53125 19.875 0.96875C21.0729 1.40625 22.1042 2.04167 22.9688 2.875C23.8438 3.69792 24.5208 4.71354 25 5.92188C25.4896 7.13021 25.7344 8.50521 25.7344 10.0469C25.7344 11.349 25.5833 12.599 25.2812 13.7969C24.9792 14.9844 24.5365 16.0938 23.9531 17.125C23.3698 18.1562 22.651 19.0938 21.7969 19.9375C20.9427 20.7812 19.9635 21.5052 18.8594 22.1094C17.7552 22.7135 16.526 23.1823 15.1719 23.5156C13.8281 23.8385 12.375 24 10.8125 24H0.953125L1.95312 19.7188H4.375L7.875 4.60938H5.4375L6.4375 0.3125ZM13.3594 4.60938L9.84375 19.7188H11.5156C12.276 19.7188 13.0104 19.6094 13.7188 19.3906C14.4375 19.1615 15.1094 18.849 15.7344 18.4531C16.3698 18.0469 16.9479 17.5625 17.4688 17C18 16.4375 18.4531 15.8177 18.8281 15.1406C19.2135 14.4531 19.5104 13.7188 19.7188 12.9375C19.9271 12.1562 20.0312 11.3438 20.0312 10.5C20.0312 9.40625 19.8906 8.48438 19.6094 7.73438C19.3385 6.98438 18.9688 6.38021 18.5 5.92188C18.0417 5.45312 17.5104 5.11979 16.9062 4.92188C16.3021 4.71354 15.6719 4.60938 15.0156 4.60938H13.3594ZM31.4688 17.125C31.4896 17.375 31.5312 17.6146 31.5938 17.8438C31.6979 18.2396 31.8698 18.5885 32.1094 18.8906C32.3594 19.1823 32.6823 19.4167 33.0781 19.5938C33.474 19.7604 33.9531 19.8438 34.5156 19.8438C34.9323 19.8438 35.3125 19.8021 35.6562 19.7188C36.0104 19.6354 36.3438 19.5208 36.6562 19.375C36.9688 19.2188 37.2656 19.0365 37.5469 18.8281C37.8385 18.6198 38.125 18.3906 38.4062 18.1406L41.8438 21.1562C40.7917 22.2812 39.5781 23.1094 38.2031 23.6406C36.8281 24.1615 35.349 24.4219 33.7656 24.4219C32.7448 24.4219 31.7865 24.2552 30.8906 23.9219C29.9948 23.5885 29.2135 23.1146 28.5469 22.5C27.8802 21.875 27.349 21.1198 26.9531 20.2344C26.5677 19.349 26.375 18.3542 26.375 17.25C26.375 15.7604 26.6406 14.4062 27.1719 13.1875C27.7135 11.9688 28.4375 10.9271 29.3438 10.0625C30.25 9.1875 31.2969 8.51562 32.4844 8.04688C33.6823 7.56771 34.9427 7.32812 36.2656 7.32812C37.3177 7.32812 38.2865 7.51562 39.1719 7.89062C40.0573 8.25521 40.8177 8.75 41.4531 9.375C42.099 9.98958 42.599 10.7031 42.9531 11.5156C43.3177 12.3281 43.5 13.1719 43.5 14.0469C43.5 14.2552 43.4896 14.4896 43.4688 14.75C43.4479 15.0104 43.4167 15.2812 43.375 15.5625C43.3333 15.8333 43.2812 16.1042 43.2188 16.375C43.1562 16.6458 43.0885 16.8958 43.0156 17.125H31.4688ZM32.1406 13.375C32.099 13.4479 32.0625 13.5208 32.0312 13.5938H38.7969C38.776 13.3125 38.6823 13.0417 38.5156 12.7812C38.3594 12.5104 38.1458 12.2708 37.875 12.0625C37.6146 11.8542 37.3021 11.6875 36.9375 11.5625C36.5833 11.4271 36.1875 11.3594 35.75 11.3594C35.2292 11.3594 34.7292 11.4375 34.25 11.5938C33.7812 11.75 33.3646 11.9792 33 12.2812C32.6458 12.5729 32.3594 12.9375 32.1406 13.375ZM45.4531 7.8125H48.4688L49.3906 3.9375L55.375 1.375L53.8438 7.8125H56.8125L55.8281 12.0938H52.8281L51.4688 17.8906C51.3125 18.474 51.2448 18.9375 51.2656 19.2812C51.2865 19.625 51.3958 19.875 51.5938 20.0312C51.8021 20.1771 52.0417 20.25 52.3125 20.25C52.5312 20.25 52.7656 20.2292 53.0156 20.1875C53.276 20.1458 53.5521 20.0833 53.8438 20L53.9062 23.5781C53.5729 23.7031 53.2448 23.8177 52.9219 23.9219C52.599 24.026 52.2552 24.1094 51.8906 24.1719C51.5365 24.2448 51.1562 24.2969 50.75 24.3281C50.3542 24.3698 49.9219 24.3906 49.4531 24.3906C48.7031 24.3906 48.0417 24.3021 47.4688 24.125C46.9062 23.9583 46.4583 23.6719 46.125 23.2656C45.8021 22.8594 45.6042 22.3177 45.5312 21.6406C45.4688 20.9531 45.5625 20.099 45.8125 19.0781L47.4531 12.0938H44.4688L45.4531 7.8125ZM59.3594 7.8125H62.375L63.2969 3.9375L69.2812 1.375L67.75 7.8125H70.7188L69.7344 12.0938H66.7344L65.375 17.8906C65.2188 18.474 65.151 18.9375 65.1719 19.2812C65.1927 19.625 65.3021 19.875 65.5 20.0312C65.7083 20.1771 65.9479 20.25 66.2188 20.25C66.4375 20.25 66.6719 20.2292 66.9219 20.1875C67.1823 20.1458 67.4583 20.0833 67.75 20L67.8125 23.5781C67.4792 23.7031 67.151 23.8177 66.8281 23.9219C66.5052 24.026 66.1615 24.1094 65.7969 24.1719C65.4427 24.2448 65.0625 24.2969 64.6562 24.3281C64.2604 24.3698 63.8281 24.3906 63.3594 24.3906C62.6094 24.3906 61.9479 24.3021 61.375 24.125C60.8125 23.9583 60.3646 23.6719 60.0312 23.2656C59.7083 22.8594 59.5104 22.3177 59.4375 21.6406C59.375 20.9531 59.4688 20.099 59.7188 19.0781L61.3594 12.0938H58.375L59.3594 7.8125ZM72.6562 7.8125H80.6562L79.6719 12.0938H78.4688L79.5 18.2344L83.3438 12.0938H82.0156L83 7.8125H91L90.0156 12.0938H88.75L78.8438 27.0781H80.7969L79.6406 31.3594H70.6875L71.8281 27.0781H73.9531L75.9219 23.9531L73.3125 12.0938H71.6719L72.6562 7.8125Z" fill="url(#paint0_linear_1_4)"/>
                        <defs>
                        <linearGradient id="paint0_linear_1_4" x1="0" y1="-7" x2="89" y2="-7" gradientUnits="userSpaceOnUse">
                        <stop offset="0.140625" stop-color="#B8E9E6" stop-opacity="0.9"/>
                        <stop offset="0.395833" stop-color="#62CF6D" stop-opacity="0.8"/>
                        <stop offset="0.671875" stop-color="#62CF6D" stop-opacity="0.8"/>
                        <stop offset="0.90625" stop-color="#B8E9E6" stop-opacity="1"/>
                        </linearGradient>
                        </defs>
                    </svg>
                    </a>
                </div>
                <div className="navbar arvo bold c-dark " id="collapseSidebar">
                    <a href='/search' className='belleza no-underline c-dark px-1'>Search</a>
                    <a href='/saves' className='belleza no-underline c-dark px-1'>Saves</a>
                    <a href='/reservations' className='belleza no-underline c-dark px-1'>Reservations</a>
                    <a href='/users' className='belleza no-underline c-dark px-1'>User</a>
                </div>
            </div>
           : <div className={navStyle}>
        <div className="navbar-head nav-left">
            <div className="navbar-toogle-button" data-collapse="collapseSidebar"></div>
            <a href='/' className="navbar-header">
            <svg width="91" height="32" viewBox="0 0 91 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M6.4375 0.3125H15.9375C17.3646 0.3125 18.6771 0.53125 19.875 0.96875C21.0729 1.40625 22.1042 2.04167 22.9688 2.875C23.8438 3.69792 24.5208 4.71354 25 5.92188C25.4896 7.13021 25.7344 8.50521 25.7344 10.0469C25.7344 11.349 25.5833 12.599 25.2812 13.7969C24.9792 14.9844 24.5365 16.0938 23.9531 17.125C23.3698 18.1562 22.651 19.0938 21.7969 19.9375C20.9427 20.7812 19.9635 21.5052 18.8594 22.1094C17.7552 22.7135 16.526 23.1823 15.1719 23.5156C13.8281 23.8385 12.375 24 10.8125 24H0.953125L1.95312 19.7188H4.375L7.875 4.60938H5.4375L6.4375 0.3125ZM13.3594 4.60938L9.84375 19.7188H11.5156C12.276 19.7188 13.0104 19.6094 13.7188 19.3906C14.4375 19.1615 15.1094 18.849 15.7344 18.4531C16.3698 18.0469 16.9479 17.5625 17.4688 17C18 16.4375 18.4531 15.8177 18.8281 15.1406C19.2135 14.4531 19.5104 13.7188 19.7188 12.9375C19.9271 12.1562 20.0312 11.3438 20.0312 10.5C20.0312 9.40625 19.8906 8.48438 19.6094 7.73438C19.3385 6.98438 18.9688 6.38021 18.5 5.92188C18.0417 5.45312 17.5104 5.11979 16.9062 4.92188C16.3021 4.71354 15.6719 4.60938 15.0156 4.60938H13.3594ZM31.4688 17.125C31.4896 17.375 31.5312 17.6146 31.5938 17.8438C31.6979 18.2396 31.8698 18.5885 32.1094 18.8906C32.3594 19.1823 32.6823 19.4167 33.0781 19.5938C33.474 19.7604 33.9531 19.8438 34.5156 19.8438C34.9323 19.8438 35.3125 19.8021 35.6562 19.7188C36.0104 19.6354 36.3438 19.5208 36.6562 19.375C36.9688 19.2188 37.2656 19.0365 37.5469 18.8281C37.8385 18.6198 38.125 18.3906 38.4062 18.1406L41.8438 21.1562C40.7917 22.2812 39.5781 23.1094 38.2031 23.6406C36.8281 24.1615 35.349 24.4219 33.7656 24.4219C32.7448 24.4219 31.7865 24.2552 30.8906 23.9219C29.9948 23.5885 29.2135 23.1146 28.5469 22.5C27.8802 21.875 27.349 21.1198 26.9531 20.2344C26.5677 19.349 26.375 18.3542 26.375 17.25C26.375 15.7604 26.6406 14.4062 27.1719 13.1875C27.7135 11.9688 28.4375 10.9271 29.3438 10.0625C30.25 9.1875 31.2969 8.51562 32.4844 8.04688C33.6823 7.56771 34.9427 7.32812 36.2656 7.32812C37.3177 7.32812 38.2865 7.51562 39.1719 7.89062C40.0573 8.25521 40.8177 8.75 41.4531 9.375C42.099 9.98958 42.599 10.7031 42.9531 11.5156C43.3177 12.3281 43.5 13.1719 43.5 14.0469C43.5 14.2552 43.4896 14.4896 43.4688 14.75C43.4479 15.0104 43.4167 15.2812 43.375 15.5625C43.3333 15.8333 43.2812 16.1042 43.2188 16.375C43.1562 16.6458 43.0885 16.8958 43.0156 17.125H31.4688ZM32.1406 13.375C32.099 13.4479 32.0625 13.5208 32.0312 13.5938H38.7969C38.776 13.3125 38.6823 13.0417 38.5156 12.7812C38.3594 12.5104 38.1458 12.2708 37.875 12.0625C37.6146 11.8542 37.3021 11.6875 36.9375 11.5625C36.5833 11.4271 36.1875 11.3594 35.75 11.3594C35.2292 11.3594 34.7292 11.4375 34.25 11.5938C33.7812 11.75 33.3646 11.9792 33 12.2812C32.6458 12.5729 32.3594 12.9375 32.1406 13.375ZM45.4531 7.8125H48.4688L49.3906 3.9375L55.375 1.375L53.8438 7.8125H56.8125L55.8281 12.0938H52.8281L51.4688 17.8906C51.3125 18.474 51.2448 18.9375 51.2656 19.2812C51.2865 19.625 51.3958 19.875 51.5938 20.0312C51.8021 20.1771 52.0417 20.25 52.3125 20.25C52.5312 20.25 52.7656 20.2292 53.0156 20.1875C53.276 20.1458 53.5521 20.0833 53.8438 20L53.9062 23.5781C53.5729 23.7031 53.2448 23.8177 52.9219 23.9219C52.599 24.026 52.2552 24.1094 51.8906 24.1719C51.5365 24.2448 51.1562 24.2969 50.75 24.3281C50.3542 24.3698 49.9219 24.3906 49.4531 24.3906C48.7031 24.3906 48.0417 24.3021 47.4688 24.125C46.9062 23.9583 46.4583 23.6719 46.125 23.2656C45.8021 22.8594 45.6042 22.3177 45.5312 21.6406C45.4688 20.9531 45.5625 20.099 45.8125 19.0781L47.4531 12.0938H44.4688L45.4531 7.8125ZM59.3594 7.8125H62.375L63.2969 3.9375L69.2812 1.375L67.75 7.8125H70.7188L69.7344 12.0938H66.7344L65.375 17.8906C65.2188 18.474 65.151 18.9375 65.1719 19.2812C65.1927 19.625 65.3021 19.875 65.5 20.0312C65.7083 20.1771 65.9479 20.25 66.2188 20.25C66.4375 20.25 66.6719 20.2292 66.9219 20.1875C67.1823 20.1458 67.4583 20.0833 67.75 20L67.8125 23.5781C67.4792 23.7031 67.151 23.8177 66.8281 23.9219C66.5052 24.026 66.1615 24.1094 65.7969 24.1719C65.4427 24.2448 65.0625 24.2969 64.6562 24.3281C64.2604 24.3698 63.8281 24.3906 63.3594 24.3906C62.6094 24.3906 61.9479 24.3021 61.375 24.125C60.8125 23.9583 60.3646 23.6719 60.0312 23.2656C59.7083 22.8594 59.5104 22.3177 59.4375 21.6406C59.375 20.9531 59.4688 20.099 59.7188 19.0781L61.3594 12.0938H58.375L59.3594 7.8125ZM72.6562 7.8125H80.6562L79.6719 12.0938H78.4688L79.5 18.2344L83.3438 12.0938H82.0156L83 7.8125H91L90.0156 12.0938H88.75L78.8438 27.0781H80.7969L79.6406 31.3594H70.6875L71.8281 27.0781H73.9531L75.9219 23.9531L73.3125 12.0938H71.6719L72.6562 7.8125Z" fill="url(#paint0_linear_1_4)"/>
                <defs>
                <linearGradient id="paint0_linear_1_4" x1="0" y1="-7" x2="89" y2="-7" gradientUnits="userSpaceOnUse">
                <stop offset="0.140625" stop-color="#B8E9E6" stop-opacity="0.8"/>
                <stop offset="0.395833" stop-color="#62CF6D" stop-opacity="0.8"/>
                <stop offset="0.671875" stop-color="#463808" stop-opacity="0.8"/>
                <stop offset="0.90625" stop-opacity="0.8"/>
                </linearGradient>
                </defs>
            </svg>
            </a>
        </div>
        <div className="navbar arvo bold c-dark" id="collapseSidebar">
            <a href='/search' className='belleza no-underline c-dark px-1'>Search Services</a>
            <a href='/login' className='belleza no-underline c-dark px-1'>Login / Register</a>
        </div>
        </div>
        }
    </>
  )
}